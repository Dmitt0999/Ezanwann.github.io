<!DOCTYPE html>
<html>
    <head>
        <title>Page Title</title>
    </head>
    <body>
    <h4>Instant AI image generation, developed by wann</h2>
        <img id="myimg" alt="result here">
        <textarea id="prompt"></textarea>
        <button id="change">Vary</button>
        <button id="dl">Download photo</button>
    </body>
    <script>
        const url = 'wss://lcm2.krea.ai/ws?useMsgpack';

const headers = {
  'Host': 'lcm2.krea.ai',
  'Connection': 'Upgrade',
  'Pragma': 'no-cache',
  'Cache-Control': 'no-cache',
  'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36',
  'Upgrade': 'websocket',
  'Origin': 'https://www.krea.ai',
  'Sec-WebSocket-Version': '13',
  'Accept-Encoding': 'gzip, deflate, br',
  'Accept-Language': 'en-MY,en;q=0.9,ms-MY;q=0.8,ms;q=0.7,en-GB;q=0.6,en-US;q=0.5',
  'Sec-WebSocket-Key': 'KklgyMR4JnqlWT65VA1wOQ==',
  'Sec-WebSocket-Extensions': 'permessage-deflate; client_max_window_bits'
};

// Create a new WebSocket connection
const ws = new WebSocket(url, null, headers);

let ds="8ea473656564a6373932353338a86d6f64656c5f6964a76b7265615f786ca670726f6d7074da019b";
let dst="8ea473656564a6373932353338a86d6f64656c5f6964a76b7265615f786ca670726f6d7074da019b";
let ds1="8ea473656564a6";
let ds2="a86d6f64656c5f6964a76b7265615f786ca670726f6d7074da019b";
let df="2c206f626a65637420386bae67756964616e63655f7363616c6500a8737472656e67746801a5737465707305ac7374796c655f696d6167657390a57769647468cd0400a6686569676874cd0400ae636f6d62696e655f6d6574686f64a761766572616765b0676c6f62616c5f69705f77656967687401b6676c6f62616c5f7374796c655f69705f776569676874cb3ff4cccccccccccdaa696d6167655f73697a65cd0576ab696d6167655f6279746573c50576524946466e05000057454250565038580a000000200000001f00001f000049434350c8010000000001c800000000043000006d6e74725247422058595a2007e00001000100000000000061637370000000000000000000000000000000000000000000000000000000010000f6d6000100000000d32d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000964657363000000f0000000247258595a00000114000000146758595a00000128000000146258595a0000013c00000014777470740000015000000014725452430000016400000028675452430000016400000028625452430000016400000028637072740000018c0000003c6d6c756300000000000000010000000c656e5553000000080000001c007300520047004258595a200000000000006fa2000038f50000039058595a2000000000000062990000b785000018da58595a2000000000000024a000000f840000b6cf58595a20000000000000f6d6000100000000d32d706172610000000000040000000266660000f2a700000d59000013d000000a5b00000000000000006d6c756300000000000000010000000c656e5553000000200000001c0047006f006f0067006c006500200049006e0063002e0020003200300031003656503820800300003011009d012a2000200001402625b00274ca0c60f604180db01fa93bc03ce03d0efd403d003ca7ff703e003f683f6dbda9ffffe08234132b3f1990377e7de0dc01d81545bfc67849ff1fdec51d27a01fd57c01be01fe03cddffc7f627fd2ffe3ff52f305f18ff8bfed3f001fc67f99ffabfee9eccdea8bf403d8d7f54cfb6ac4b28faf2cfe1cc7ccb8f0d8b94298973e000000f8cc488f334c34bb1dad95413912f63dbb8a777395638b0ccfd7fe9f8abdd17f57825c1a8e40decd91977164546a259cd0bbca50b8f9ef12f5ea2a004443375f3a12d2f443ae7538ed25ac789766310139d7011ffaec8938b7baf4e50efcf27aa794b5730b9dbdd8a0fe4667d745a3d5dac92f2105d591aa970a43ad86eb888c992aa71862e7d2f767a3a486a717ad73e6f3cc83624766de0033227782d9673ce0d892bf9fa8d373604125b286c44831f419e1eff1f54c4dcd91f34fcf6c7900569f49c99dfdbfb4358c9b079dd93cb948b4b8cbdd38ffc39be43d2b3af12c531ffa4385f9a0cbeea3b302b2700b5fc775570e79d1fc354bd30ffe74ac3c467d970cf7e939982b0e6017c166523b948ad89b495f0fe7b53374edbd0bb846fa28750300697c76dfe79e0a50a42fc26a60dec501694f168d929e7fc90d640c6dad68a9d8c85a4808d177f7d146cf49cbd20bb017abf17912145f8e285f771ee1c5aaa9700bf1541f2d45a2069c17983f524c9d32c53265e675277a8c43a2d1b2f2f1083e0a956ffc30e745c4f54b9e082dc859545a08d59de1e5ee9e4c56058527e3fcdd31dd96109f4b6b62e40267bfdb8fb5533cea2b4a747ca35df9b9e9d7cef931f5e282b19f621545b38c57005000377c4992fa876ff4baa5288c4c4ea82cdfaddaf44d476e7f85e57b0b46dac409668ede9ed9ff7c8caa552c7cb8272c0e8743a43d200e4f306e3e43ff17f7d79c3ac41b1cbaa94d94443e7f84cb7b72c1b357787ce275e91d8c5d00a770ee54a7dd8392d3732b3d743282ecc6b33f3e9838eb713391bb4a84ee910bfe90ecc336ca856628330417ad72fbf5afae8128a745de4592ea9319c95fd770bb3102b4b1f43e7d4a430991a35b68fe45a04f3bfc1fdb8c26d9eee64efaa4b8462d5dbca3a59ea77927f19754629839c72f82ce86813c811c5299879648843c5495358020cbbb38c50eb777b8ef042482e14ccc002e49949306247e28ddef7e9d6a1879796969a456e28dff1ef5515ed81bfb30df5c49892cee2b5695a768000000";

let de="8ea473656564a6373932353338a86d6f64656c5f6964a76b7265615f786ca670726f6d7074da019b616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616162612c206f626a65637420386bae67756964616e63655f7363616c6500a8737472656e67746801a5737465707305ac7374796c655f696d6167657390a57769647468cd0400a6686569676874cd0400ae636f6d62696e655f6d6574686f64a761766572616765b0676c6f62616c5f69705f77656967687401b6676c6f62616c5f7374796c655f69705f776569676874cb3ff4cccccccccccdaa696d6167655f73697a65cd0576ab696d6167655f6279746573c50576524946466e05000057454250565038580a000000200000001f00001f000049434350c8010000000001c800000000043000006d6e74725247422058595a2007e00001000100000000000061637370000000000000000000000000000000000000000000000000000000010000f6d6000100000000d32d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000964657363000000f0000000247258595a00000114000000146758595a00000128000000146258595a0000013c00000014777470740000015000000014725452430000016400000028675452430000016400000028625452430000016400000028637072740000018c0000003c6d6c756300000000000000010000000c656e5553000000080000001c007300520047004258595a200000000000006fa2000038f50000039058595a2000000000000062990000b785000018da58595a2000000000000024a000000f840000b6cf58595a20000000000000f6d6000100000000d32d706172610000000000040000000266660000f2a700000d59000013d000000a5b00000000000000006d6c756300000000000000010000000c656e5553000000200000001c0047006f006f0067006c006500200049006e0063002e0020003200300031003656503820800300003011009d012a2000200001402625b00274ca0c60f604180db01fa93bc03ce03d0efd403d003ca7ff703e003f683f6dbda9ffffe08234132b3f1990377e7de0dc01d81545bfc67849ff1fdec51d27a01fd57c01be01fe03cddffc7f627fd2ffe3ff52f305f18ff8bfed3f001fc67f99ffabfee9eccdea8bf403d8d7f54cfb6ac4b28faf2cfe1cc7ccb8f0d8b94298973e000000f8cc488f334c34bb1dad95413912f63dbb8a777395638b0ccfd7fe9f8abdd17f57825c1a8e40decd91977164546a259cd0bbca50b8f9ef12f5ea2a004443375f3a12d2f443ae7538ed25ac789766310139d7011ffaec8938b7baf4e50efcf27aa794b5730b9dbdd8a0fe4667d745a3d5dac92f2105d591aa970a43ad86eb888c992aa71862e7d2f767a3a486a717ad73e6f3cc83624766de0033227782d9673ce0d892bf9fa8d373604125b286c44831f419e1eff1f54c4dcd91f34fcf6c7900569f49c99dfdbfb4358c9b079dd93cb948b4b8cbdd38ffc39be43d2b3af12c531ffa4385f9a0cbeea3b302b2700b5fc775570e79d1fc354bd30ffe74ac3c467d970cf7e939982b0e6017c166523b948ad89b495f0fe7b53374edbd0bb846fa28750300697c76dfe79e0a50a42fc26a60dec501694f168d929e7fc90d640c6dad68a9d8c85a4808d177f7d146cf49cbd20bb017abf17912145f8e285f771ee1c5aaa9700bf1541f2d45a2069c17983f524c9d32c53265e675277a8c43a2d1b2f2f1083e0a956ffc30e745c4f54b9e082dc859545a08d59de1e5ee9e4c56058527e3fcdd31dd96109f4b6b62e40267bfdb8fb5533cea2b4a747ca35df9b9e9d7cef931f5e282b19f621545b38c57005000377c4992fa876ff4baa5288c4c4ea82cdfaddaf44d476e7f85e57b0b46dac409668ede9ed9ff7c8caa552c7cb8272c0e8743a43d200e4f306e3e43ff17f7d79c3ac41b1cbaa94d94443e7f84cb7b72c1b357787ce275e91d8c5d00a770ee54a7dd8392d3732b3d743282ecc6b33f3e9838eb713391bb4a84ee910bfe90ecc336ca856628330417ad72fbf5afae8128a745de4592ea9319c95fd770bb3102b4b1f43e7d4a430991a35b68fe45a04f3bfc1fdb8c26d9eee64efaa4b8462d5dbca3a59ea77927f19754629839c72f82ce86813c811c5299879648843c5495358020cbbb38c50eb777b8ef042482e14ccc002e49949306247e28ddef7e9d6a1879796969a456e28dff1ef5515ed81bfb30df5c49892cee2b5695a768000000"

let hh="8ea473656564a6333535303632a86d6f64656c5f6964a76b7265615f786ca670726f6d7074ad636a2c206f626a65637420386bae67756964616e63655f7363616c6500a8737472656e67746801a5737465707304ac7374796c655f696d6167657390a57769647468cd0400a6686569676874cd0400ae636f6d62696e655f6d6574686f64a761766572616765b0676c6f62616c5f69705f77656967687401b6676c6f62616c5f7374796c655f69705f776569676874cb3ff4cccccccccccdaa696d6167655f73697a65cd0576ab696d6167655f6279746573c50576524946466e05000057454250565038580a000000200000001f00001f000049434350c8010000000001c800000000043000006d6e74725247422058595a2007e00001000100000000000061637370000000000000000000000000000000000000000000000000000000010000f6d6000100000000d32d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000964657363000000f0000000247258595a00000114000000146758595a00000128000000146258595a0000013c00000014777470740000015000000014725452430000016400000028675452430000016400000028625452430000016400000028637072740000018c0000003c6d6c756300000000000000010000000c656e5553000000080000001c007300520047004258595a200000000000006fa2000038f50000039058595a2000000000000062990000b785000018da58595a2000000000000024a000000f840000b6cf58595a20000000000000f6d6000100000000d32d706172610000000000040000000266660000f2a700000d59000013d000000a5b00000000000000006d6c756300000000000000010000000c656e5553000000200000001c0047006f006f0067006c006500200049006e0063002e0020003200300031003656503820800300003011009d012a2000200001402625b00274ca0c60f604180db01fa93bc03ce03d0efd403d003ca7ff703e003f683f6dbda9ffffe08234132b3f1990377e7de0dc01d81545bfc67849ff1fdec51d27a01fd57c01be01fe03cddffc7f627fd2ffe3ff52f305f18ff8bfed3f001fc67f99ffabfee9eccdea8bf403d8d7f54cfb6ac4b28faf2cfe1cc7ccb8f0d8b94298973e000000f8cc488f334c34bb1dad95413912f63dbb8a777395638b0ccfd7fe9f8abdd17f57825c1a8e40decd91977164546a259cd0bbca50b8f9ef12f5ea2a004443375f3a12d2f443ae7538ed25ac789766310139d7011ffaec8938b7baf4e50efcf27aa794b5730b9dbdd8a0fe4667d745a3d5dac92f2105d591aa970a43ad86eb888c992aa71862e7d2f767a3a486a717ad73e6f3cc83624766de0033227782d9673ce0d892bf9fa8d373604125b286c44831f419e1eff1f54c4dcd91f34fcf6c7900569f49c99dfdbfb4358c9b079dd93cb948b4b8cbdd38ffc39be43d2b3af12c531ffa4385f9a0cbeea3b302b2700b5fc775570e79d1fc354bd30ffe74ac3c467d970cf7e939982b0e6017c166523b948ad89b495f0fe7b53374edbd0bb846fa28750300697c76dfe79e0a50a42fc26a60dec501694f168d929e7fc90d640c6dad68a9d8c85a4808d177f7d146cf49cbd20bb017abf17912145f8e285f771ee1c5aaa9700bf1541f2d45a2069c17983f524c9d32c53265e675277a8c43a2d1b2f2f1083e0a956ffc30e745c4f54b9e082dc859545a08d59de1e5ee9e4c56058527e3fcdd31dd96109f4b6b62e40267bfdb8fb5533cea2b4a747ca35df9b9e9d7cef931f5e282b19f621545b38c57005000377c4992fa876ff4baa5288c4c4ea82cdfaddaf44d476e7f85e57b0b46dac409668ede9ed9ff7c8caa552c7cb8272c0e8743a43d200e4f306e3e43ff17f7d79c3ac41b1cbaa94d94443e7f84cb7b72c1b357787ce275e91d8c5d00a770ee54a7dd8392d3732b3d743282ecc6b33f3e9838eb713391bb4a84ee910bfe90ecc336ca856628330417ad72fbf5afae8128a745de4592ea9319c95fd770bb3102b4b1f43e7d4a430991a35b68fe45a04f3bfc1fdb8c26d9eee64efaa4b8462d5dbca3a59ea77927f19754629839c72f82ce86813c811c5299879648843c5495358020cbbb38c50eb777b8ef042482e14ccc002e49949306247e28ddef7e9d6a1879796969a456e28dff1ef5515ed81bfb30df5c49892cee2b5695a768000000"
// The hex string to be sent
const hf= "2c206f626a65637420386bae67756964616e63655f7363616c6500a8737472656e67746801a5737465707304ac7374796c655f696d6167657390a57769647468cd0400a6686569676874cd0400ae636f6d62696e655f6d6574686f64a761766572616765b0676c6f62616c5f69705f77656967687401b6676c6f62616c5f7374796c655f69705f776569676874cb3ff4cccccccccccdaa696d6167655f73697a65cd0576ab696d6167655f6279746573c50576524946466e05000057454250565038580a000000200000001f00001f000049434350c8010000000001c800000000043000006d6e74725247422058595a2007e00001000100000000000061637370000000000000000000000000000000000000000000000000000000010000f6d6000100000000d32d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000964657363000000f0000000247258595a00000114000000146758595a00000128000000146258595a0000013c00000014777470740000015000000014725452430000016400000028675452430000016400000028625452430000016400000028637072740000018c0000003c6d6c756300000000000000010000000c656e5553000000080000001c007300520047004258595a200000000000006fa2000038f50000039058595a2000000000000062990000b785000018da58595a2000000000000024a000000f840000b6cf58595a20000000000000f6d6000100000000d32d706172610000000000040000000266660000f2a700000d59000013d000000a5b00000000000000006d6c756300000000000000010000000c656e5553000000200000001c0047006f006f0067006c006500200049006e0063002e0020003200300031003656503820800300003011009d012a2000200001402625b00274ca0c60f604180db01fa93bc03ce03d0efd403d003ca7ff703e003f683f6dbda9ffffe08234132b3f1990377e7de0dc01d81545bfc67849ff1fdec51d27a01fd57c01be01fe03cddffc7f627fd2ffe3ff52f305f18ff8bfed3f001fc67f99ffabfee9eccdea8bf403d8d7f54cfb6ac4b28faf2cfe1cc7ccb8f0d8b94298973e000000f8cc488f334c34bb1dad95413912f63dbb8a777395638b0ccfd7fe9f8abdd17f57825c1a8e40decd91977164546a259cd0bbca50b8f9ef12f5ea2a004443375f3a12d2f443ae7538ed25ac789766310139d7011ffaec8938b7baf4e50efcf27aa794b5730b9dbdd8a0fe4667d745a3d5dac92f2105d591aa970a43ad86eb888c992aa71862e7d2f767a3a486a717ad73e6f3cc83624766de0033227782d9673ce0d892bf9fa8d373604125b286c44831f419e1eff1f54c4dcd91f34fcf6c7900569f49c99dfdbfb4358c9b079dd93cb948b4b8cbdd38ffc39be43d2b3af12c531ffa4385f9a0cbeea3b302b2700b5fc775570e79d1fc354bd30ffe74ac3c467d970cf7e939982b0e6017c166523b948ad89b495f0fe7b53374edbd0bb846fa28750300697c76dfe79e0a50a42fc26a60dec501694f168d929e7fc90d640c6dad68a9d8c85a4808d177f7d146cf49cbd20bb017abf17912145f8e285f771ee1c5aaa9700bf1541f2d45a2069c17983f524c9d32c53265e675277a8c43a2d1b2f2f1083e0a956ffc30e745c4f54b9e082dc859545a08d59de1e5ee9e4c56058527e3fcdd31dd96109f4b6b62e40267bfdb8fb5533cea2b4a747ca35df9b9e9d7cef931f5e282b19f621545b38c57005000377c4992fa876ff4baa5288c4c4ea82cdfaddaf44d476e7f85e57b0b46dac409668ede9ed9ff7c8caa552c7cb8272c0e8743a43d200e4f306e3e43ff17f7d79c3ac41b1cbaa94d94443e7f84cb7b72c1b357787ce275e91d8c5d00a770ee54a7dd8392d3732b3d743282ecc6b33f3e9838eb713391bb4a84ee910bfe90ecc336ca856628330417ad72fbf5afae8128a745de4592ea9319c95fd770bb3102b4b1f43e7d4a430991a35b68fe45a04f3bfc1fdb8c26d9eee64efaa4b8462d5dbca3a59ea77927f19754629839c72f82ce86813c811c5299879648843c5495358020cbbb38c50eb777b8ef042482e14ccc002e49949306247e28ddef7e9d6a1879796969a456e28dff1ef5515ed81bfb30df5c49892cee2b5695a768000000";

let hs="8ea473656564a6333535303632a86d6f64656c5f6964a76b7265615f786ca670726f6d7074ad"

// Convert the hex string to a binary ArrayBuffer
function hexToArrayBuffer(hex) {
    const bytes = new Uint8Array(hex.length / 2);
    for (let i = 0; i < bytes.length; i++) {
        bytes[i] = parseInt(hex.substr(i * 2, 2), 16);
    }
    return bytes.buffer;
}

// WebSocket connection


// On WebSocket open
ws.onopen = () => {
    //console.log('WebSocket connection opened');
    
    // Convert hex to ArrayBuffer and send it
    //let fp=hf+textToHex("hi")+hs;
    //fp=de;
    //const arrayBuffer = hexToArrayBuffer(fp);
    //ws.send(arrayBuffer);
};

// Handle WebSocket messages
ws.onmessage = (event) => {
    //console.log("received "+event.data)
    const b=new Blob([event.data],{type:"image/png"});
    let el=document.getElementById("myimg");
    el.src=URL.createObjectURL(b);
    if (typeof event.data === 'string') {
        console.log('Text message from server:', event.data);
    } else if (event.data instanceof ArrayBuffer) {
        console.log('Binary message from server:', new Uint8Array(event.data));
    }
};

// Handle WebSocket errors
ws.onerror = (error) => {
    console.error('WebSocket error:', error);
};

// Handle WebSocket close
ws.onclose = () => {
    console.log('WebSocket connection closed');
};


function tth(text) {
    let hexString = "";
    for (let i = 0; i < text.length; i++) {
        // Convert each character to its ASCII/Unicode code point
        let hex = text.charCodeAt(i).toString(16);
        // Ensure that each hex code is 2 characters long (padding with 0 if needed)
        hexString += hex.padStart(2, "0");
    }
    return hexString;
}

function ft(t){
    let r=400-t.length;
   // console.log("remained length is :"+r)
    let j=t;
    for(let i=0;i<r;++i){
        j+=" ";
    }
    //console.log("new length is"+j.length)
    return j;
}

let sid="224682";
let pv="";
let o="0123456789";

// Example usage

    let p=document.getElementById("prompt");
    let v=document.getElementById("change");
    let dl=document.getElementById("dl");
    
    let el=document.getElementById("myimg");
    function genimg(t,sid){
        //console.log(t)
        let h=tth(ft(t))
        let sidh=tth(sid);
        //console.log(sid)
        let fp=ds1+sidh+ds2+h+df;
        if (ws && ws.readyState === WebSocket.OPEN) {
        const arrayBuffer = hexToArrayBuffer(fp);
    ws.send(arrayBuffer);
        //console.log('Data sent to WebSocket server');
       // console.log(ft(pv).length)
    }
    }
    v.onclick=e=>{
        sid="";
        for (let i=0;i<6;++i){
            sid+=o[Math.floor(Math.random()*10)];
        }
        genimg(pv,sid);
    }
    
    p.oninput = e =>{ 
        
        pv=e.target.value;
        genimg(pv,sid);
        /*console.log(pv)
        let h=tth(ft(pv))
        let sidh=tth(sid);
        console.log(sid)
        let fp=ds1+sidh+ds2+h+df;
        if (ws && ws.readyState === WebSocket.OPEN) {
        const arrayBuffer = hexToArrayBuffer(fp);
    ws.send(arrayBuffer);
        //console.log('Data sent to WebSocket server');
       // console.log(ft(pv).length)
    }*/
    }
    
    dl.onclick=e=>{
        let st="";
        for(let i=0;i<5;++i){
          st+=o[Math.floor(Math.random()*10)];}
        let a =document.createElement('a');
        a.href=el.src;
        a.download=p.value+st;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
    }





    </script>
</html>